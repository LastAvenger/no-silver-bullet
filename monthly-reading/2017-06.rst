====================
Reading in June 2017
====================

`Universal TUN/TAP device driver`_

Linux Kernel 中的 TUN/TAP 设备，允许编写程序来接受和传输来自用户程序的网络数据包。
TUN 设备需要读写 IP 数据包，对 TAP 设备来说则是以太网帧。

通过打开设备文件 ``/dev/net/tun`` ，以及调用 ``ioctl()`` 来获得一个 TAP/TUN 设备。
设备的种类由 ``ifreq.ifr_flags`` 决定。

http://vtun.sourceforge.net/tun 提供了使用 TUN/TAP 设备的一些示例。

.. note::
    示例和文档的描述有出入，如文档说使用 TUN 还是 TAP 设备取决于 ``ioctl()`` 的
    flags，而示例中则通过直接打开 ``/dev/net/tun`` 和 ``/dev/net/tap`` 来使用不
    同的设备。

    但是在 https://www.kernel.org/doc/Documentation/admin-guide/devices.txt 中
    并没有找到 ``/dev/net/tap`` 的设备号（``/dev/net/tun`` 的是 MAJOR 10 MINOR
    200），因此还是以内核文档为准。

.. _Universal TUN/TAP device driver: https://www.kernel.org/doc/Documentation/networking/tuntap.txt
